let mailgos=document.querySelectorAll('a[href^="mailto:"]:not(.no-mailgo)'),styles='\n\n    .mailgo-modal {\n      all: initial;\n      * {\n        all: unset;\n      }\n    }\n\n    .mailgo-title {\n      display: block;\n      margin-bottom: 16px;\n    }\n\n    .mailgo-modal-background {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background-color: rgba(10,10,10,.86);\n      opacity: 0.8;\n    }\n    .mailgo-modal {\n      position: fixed;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      display: none;\n      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    }\n    .mailgo-modal.is-active {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n    }\n    .mailgo-modal-content {\n      z-index: 1000;\n      text-align: center;\n      width: 200px;\n      background-color: #fff;\n      border-radius: 6px;\n      box-shadow: 0 2px 3px rgba(10,10,10,.1), 0 0 0 1px rgba(10,10,10,.1);\n      color: #4a4a4a;\n      display: block;\n      padding: 1.25rem;\n    }\n    .mailgo-modal-content a {\n      display: block;\n      color: #4a4a4a;\n      padding: 10px;\n      border-radius: 4px;\n      text-decoration: none;\n    }\n    .mailgo-modal-content a:hover {\n      background-color: rgba(0, 0, 0, 0.08);\n    }\n    .mailgo-modal-content a.outlook {\n      color: rgba(0, 114, 198);\n    }\n    .mailgo-modal-content a.gmail {\n      color: rgba(212, 70, 56);\n    }\n    .mailgo-modal-content a.outlook:hover {\n      background-color: rgba(0, 114, 198, 0.08);\n    }\n    .mailgo-modal-content a.gmail:hover {\n      background-color: rgba(212, 70, 56, 0.08);\n    }\n    a.mailgo-copy {\n      margin-top: 10px;\n      padding: 16px 10px;\n    }\n    .mailgo-by {\n      display: block;\n      font-size: 8px;\n      padding: 5px;\n      margin-top: 0.75rem;\n    }\n    .mailgo-by:hover {\n      background-color: none;\n    }\n',styleSheet=document.createElement("style");function validateEmail(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}function copyToClipboard(e){const n=document.createElement("textarea");n.value=e,n.setAttribute("readonly",""),n.style.position="absolute",n.style.left="-9999px",document.body.appendChild(n);const t=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);n.select(),document.execCommand("copy"),document.body.removeChild(n),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))}styleSheet.type="text/css",styleSheet.innerText=styles,document.head.appendChild(styleSheet),console.log("mailgo is WIP!"),mailgos.forEach((e,n)=>{let t=e.href.split("?")[0].split("mailto:")[1].trim();if(!validateEmail(t))return;let o=new URL(e.href),a=new URLSearchParams(o.search),l=(a.get("subject"),a.get("body"),a.get("cc"),a.get("bcc"),document.createElement("div"));l.className="mailgo-modal",l.setAttribute("data-index",n);let i=document.createElement("div");i.className="mailgo-modal-background",l.appendChild(i);let d=document.createElement("div");d.className="mailgo-modal-content",l.appendChild(d);let c=document.createElement("strong");c.className="mailgo-title";let m=document.createTextNode(t);c.appendChild(m),d.appendChild(c);let r=document.createElement("div");r.className="mailgo-details",d.appendChild(r);let s=document.createElement("a");s.href="https://mail.google.com/mail?extsrc=mailto&url="+e.href,s.classList.add("mailgo-open"),s.classList.add("gmail");let p=document.createTextNode("open in Gmail");s.appendChild(p),d.appendChild(s);let g=document.createElement("a");g.href="https://outlook.office.com/owa/?rru=compose&to="+t+o.search,g.classList.add("mailgo-open"),g.classList.add("outlook");let u=document.createTextNode("open in Outlook");g.appendChild(u),d.appendChild(g);let h=document.createElement("a");h.href=e.href,h.className="mailgo-open";let b=document.createTextNode("open");h.appendChild(b),d.appendChild(h);let y=document.createElement("a");y.href="#mailgo-copy",y.className="mailgo-copy";let x=document.createTextNode("copy");y.appendChild(x),y.addEventListener("click",e=>{copyToClipboard(t),y.innerHTML="copied!"},!1),d.appendChild(y);let f=document.createElement("a");f.href="https://mailgo.js.org",f.className="mailgo-by";let C=document.createTextNode("mailgo.js.org");f.appendChild(C),d.appendChild(f),e.parentNode.insertBefore(l,e.nextSibling),e.addEventListener("click",n=>{n.preventDefault(),e.nextElementSibling.classList.add("is-active")},!1),i.addEventListener("click",n=>{e.nextElementSibling.classList.remove("is-active")},!1)});