"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mailgo=exports.defaultMailgo=void 0;var url,title,titleTel,detailCc,detailBcc,detailSubject,detailBody,ccValue,bccValue,subjectValue,bodyValue,gmail,outlook,open,telegram,wa,skype,call,copyMail,copyTel,MAILTO="mailto:",TEL="tel:",CALLTO="callto:",MAIL_TYPE="mail",TEL_TYPE="tel",DEFAULT_BTN_HREF="javascript:void(0);",span="span",mail="",encEmail="",cc="",bcc="",subject="",bodyMail="",tel="",msg="",telegramUsername="",skypeUsername="",mailgoInit=function(){var e=createElement();e.style.display="none",e.id="mailgo",e.classList.add("m-modal");var o=createElement();o.className="m-modal-back",e.appendChild(o);var t=createElement();t.className="m-modal-content",e.appendChild(t),(title=createElement("strong")).id="m-title",title.className="m-title",t.appendChild(title);var a=createElement();a.id="m-details",a.className="m-details",(detailCc=createElement("p")).id="m-cc";var l=createElement(span);l.className="w-500",l.appendChild(createTextNode("cc ")),(ccValue=createElement(span)).id="m-cc-value",detailCc.appendChild(l),detailCc.appendChild(ccValue),a.appendChild(detailCc),(detailBcc=createElement("p")).id="m-bcc";var i=createElement(span);i.className="w-500",i.appendChild(createTextNode("bcc ")),(bccValue=createElement(span)).id="m-bcc-value",detailBcc.appendChild(i),detailBcc.appendChild(bccValue),a.appendChild(detailBcc),(detailSubject=createElement("p")).id="m-subject";var n=createElement(span);n.className="w-500",n.appendChild(createTextNode("subject ")),(subjectValue=createElement(span)).id="m-subject-value",detailSubject.appendChild(n),detailSubject.appendChild(subjectValue),a.appendChild(detailSubject),(detailBody=createElement("p")).id="m-body";var d=createElement(span);d.className="w-500",d.appendChild(createTextNode("body ")),(bodyValue=createElement(span)).id="m-body-value",detailBody.appendChild(d),detailBody.appendChild(bodyValue),a.appendChild(detailBody),t.appendChild(a),(gmail=createElement("a")).id="m-gmail",gmail.href=DEFAULT_BTN_HREF,gmail.classList.add("m-open"),gmail.classList.add("m-gmail"),gmail.appendChild(createTextNode("open in "));var c=createElement(span);c.className="w-500",c.appendChild(createTextNode("Gmail")),gmail.appendChild(c),t.appendChild(gmail),(outlook=createElement("a")).id="m-outlook",outlook.href=DEFAULT_BTN_HREF,outlook.classList.add("m-open"),outlook.classList.add("m-outlook"),outlook.appendChild(createTextNode("open in "));var m=createElement(span);m.className="w-500",m.appendChild(createTextNode("Outlook")),outlook.appendChild(m),t.appendChild(outlook),(open=createElement("a")).id="m-open",open.href=DEFAULT_BTN_HREF,open.classList.add("m-open"),open.classList.add("m-default");var r=createElement(span);r.className="w-500",r.appendChild(createTextNode("open")),open.appendChild(r),open.appendChild(createTextNode(" default")),t.appendChild(open),(copyMail=createElement("a")).id="m-copy",copyMail.href=DEFAULT_BTN_HREF,copyMail.classList.add("m-copy"),copyMail.classList.add("w-500"),copyMail.appendChild(createTextNode("copy")),t.appendChild(copyMail),t.appendChild(byElement()),document.body.appendChild(e),o.addEventListener("click",hideMailgo);var s=createElement();s.style.display="none",s.id="mailgo-tel",s.classList.add("m-modal");var p=createElement();p.className="m-modal-back",s.appendChild(p);var b=createElement();b.className="m-modal-content",s.appendChild(b),(titleTel=createElement("strong")).id="m-tel-title",titleTel.className="m-title",b.appendChild(titleTel),(telegram=createElement("a")).id="m-tg",telegram.href=DEFAULT_BTN_HREF,telegram.classList.add("m-open"),telegram.classList.add("m-tg"),telegram.style.display="none",telegram.appendChild(createTextNode("open in "));var g=createElement(span);g.className="w-500",g.appendChild(createTextNode("Telegram")),telegram.appendChild(g),b.appendChild(telegram),(wa=createElement("a")).id="m-wa",wa.href=DEFAULT_BTN_HREF,wa.classList.add("m-open"),wa.classList.add("m-wa"),wa.appendChild(createTextNode("open in "));var u=createElement(span);u.className="w-500",u.appendChild(createTextNode("WhatsApp")),wa.appendChild(u),b.appendChild(wa),(skype=createElement("a")).id="m-skype",skype.href=DEFAULT_BTN_HREF,skype.classList.add("m-open"),skype.classList.add("m-skype"),skype.appendChild(createTextNode("open in "));var h=createElement(span);h.className="w-500",h.appendChild(createTextNode("Skype")),skype.appendChild(h),b.appendChild(skype),(call=createElement("a")).id="m-call",call.href=DEFAULT_BTN_HREF,call.classList.add("m-open"),call.classList.add("m-default");var x=createElement(span);x.className="w-500",x.appendChild(createTextNode("call")),call.appendChild(x),call.appendChild(createTextNode(" as default")),b.appendChild(call),(copyTel=createElement("a")).id="m-tel-copy",copyTel.href=DEFAULT_BTN_HREF,copyTel.classList.add("m-copy"),copyTel.classList.add("w-500"),copyTel.appendChild(createTextNode("copy")),b.appendChild(copyTel),b.appendChild(byElement()),document.body.appendChild(s),p.addEventListener("click",hideMailgo)},mailgoRender=function(e,o){var t=0<arguments.length&&void 0!==e?e:MAIL_TYPE,a=1<arguments.length?o:void 0;if(t===MAIL_TYPE){if(a.href&&a.href.toLowerCase().startsWith(MAILTO)){mail=decodeURIComponent(a.href.split("?")[0].split(MAILTO)[1].trim());var l=(url=new URL(a.href)).searchParams;cc=l.get("cc"),bcc=l.get("bcc"),subject=l.get("subject"),bodyMail=l.get("body")}else mail=a.getAttribute("data-address")+"@"+a.getAttribute("data-domain"),url=new URL(MAILTO+encodeURIComponent(mail)),cc=a.getAttribute("data-cc-address")+"@"+a.getAttribute("data-cc-domain"),bcc=a.getAttribute("data-bcc-address")+"@"+a.getAttribute("data-bcc-domain"),subject=a.getAttribute("data-subject"),bodyMail=a.getAttribute("data-body");if(!validateEmails(mail.split(",")))return;cc&&!validateEmails(cc.split(","))&&(cc=""),bcc&&!validateEmails(bcc.split(","))&&(bcc=""),title.innerHTML=mail.split(",").join("<br/>"),cc?(detailCc.style.display="block",ccValue.innerHTML=cc.split(",").join("<br/>")):detailCc.style.display="none",bcc?(detailBcc.style.display="block",bccValue.innerHTML=bcc.split(",").join("<br/>")):detailBcc.style.display="none",subject?(detailSubject.style.display="block",subjectValue.textContent=subject):detailSubject.style.display="none",bodyMail?(detailBody.style.display="block",bodyValue.textContent=bodyMail):detailBody.style.display="none",gmail.addEventListener("click",openGmail),outlook.addEventListener("click",openOutlook),encEmail=encodeEmail(mail),open.addEventListener("click",openDefault),copyMail.addEventListener("click",function(){return copy(mail)})}t===TEL_TYPE&&(a.href&&a.href.toLowerCase().startsWith(TEL)?tel=decodeURIComponent(a.href.split("?")[0].split(TEL)[1].trim()):a.href&&a.href.toLowerCase().startsWith(CALLTO)?tel=decodeURIComponent(a.href.split("?")[0].split(CALLTO)[1].trim()):a.hasAttribute("data-tel")&&(tel=a.getAttribute("data-tel"),msg=a.getAttribute("data-msg")),a.hasAttribute("data-telegram")&&(telegramUsername=a.getAttribute("data-telegram")),a.hasAttribute("data-skype")&&(skypeUsername=a.getAttribute("data-skype")),titleTel.innerHTML=tel,wa.addEventListener("click",openWhatsApp),telegramUsername&&(setDisplay("m-tg","block"),telegram.addEventListener("click",openTelegram)),skype.addEventListener("click",openSkype),call.addEventListener("click",callDefault),copyTel.addEventListener("click",function(){return copy(tel)})),showMailgo(t),document.addEventListener("keydown",mailgoKeydown)},openGmail=function(){var e="https://mail.google.com/mail/u/0/?view=cm&source=mailto&to="+encodeURIComponent(mail);cc&&(e=e.concat("&cc="+encodeURIComponent(cc))),bcc&&(e=e.concat("&bcc="+encodeURIComponent(bcc))),subject&&(e=e.concat("&subject="+subject)),bodyMail&&(e=e.concat("&body="+bodyMail)),window.open(e,"_blank"),hideMailgo()},openOutlook=function(){var e="https://outlook.live.com/owa/?path=/mail/action/compose&to="+encodeURIComponent(mail);subject&&(e=e.concat("&subject="+subject)),bodyMail&&(e=e.concat("&body="+bodyMail)),window.open(e,"_blank"),hideMailgo()},openDefault=function(){mailToEncoded(encEmail),hideMailgo()},openTelegram=function(){var e="https://t.me/"+telegramUsername;window.open(e,"_blank"),hideMailgo()},openSkype=function(){var e="skype:"+(""!==skypeUsername?skypeUsername:tel);window.open(e,"_blank"),hideMailgo()},openWhatsApp=function(){var e="https://wa.me/"+tel;window.open(e,"_blank"),hideMailgo()},callDefault=function(){var e="tel:"+tel;window.open(e),hideMailgo()},copy=function(e){var o;copyToClipboard(e),(o=mailgoIsShowing(MAIL_TYPE)?copyMail:copyTel).textContent="copied",setTimeout(function(){o.textContent="copy",hideMailgo()},999)},isMailgo=function(e,o){var t=1<arguments.length&&void 0!==o?o:MAIL_TYPE,a=e.href;return t===MAIL_TYPE?a&&a.toLowerCase().startsWith(MAILTO)&&!e.classList.contains("no-mailgo")||e.hasAttribute("data-address")&&(a&&"#mailgo"===e.getAttribute("href").toLowerCase()||e.classList&&e.classList.contains("mailgo")):t===TEL_TYPE&&(a&&(a.toLowerCase().startsWith(TEL)||a.toLowerCase().startsWith(CALLTO))&&!e.classList.contains("no-mailgo")||e.hasAttribute("data-tel")&&a&&"#mailgo"===e.getAttribute("href").toLowerCase()||e.classList&&e.classList.contains("mailgo"))},mailgoCheckRender=function(o){if(document.contains(getE("mailgo"))&&document.contains(getE("mailgo-tel"))&&!mailgoIsShowing(MAIL_TYPE)&&!mailgoIsShowing(TEL_TYPE)){var e=o.composedPath&&o.composedPath()||composedPath(o.target);e&&e.forEach(function(e){if(!(e instanceof HTMLDocument||e instanceof Window))return isMailgo(e,MAIL_TYPE)?(o.preventDefault(),void mailgoRender(MAIL_TYPE,e)):isMailgo(e,TEL_TYPE)?(o.preventDefault(),void mailgoRender(TEL_TYPE,e)):void 0})}},mailgoKeydown=function(e){if(mailgoIsShowing(MAIL_TYPE))switch(e.keyCode){case 27:hideMailgo();break;case 71:openGmail();break;case 79:openOutlook();break;case 32:case 13:openDefault();break;case 67:copy(mail);break;default:return}else if(mailgoIsShowing(TEL_TYPE))switch(e.keyCode){case 27:hideMailgo();break;case 84:openTelegram();break;case 87:openWhatsApp();break;case 32:case 13:callDefault();break;case 67:copy(tel);break;default:return}},showMailgo=function(e){var o=0<arguments.length&&void 0!==e?e:MAIL_TYPE;o!==MAIL_TYPE?o!==TEL_TYPE||setDisplay("mailgo-tel","flex"):setDisplay("mailgo","flex")},hideMailgo=function(){setDisplay("mailgo","none"),setDisplay("mailgo-tel","none"),document.removeEventListener("keydown",mailgoKeydown)},mailgoIsShowing=function(e){var o=0<arguments.length&&void 0!==e?e:MAIL_TYPE;return o===MAIL_TYPE?"flex"===getDisplay("mailgo"):o===TEL_TYPE&&"flex"===getDisplay("mailgo-tel")},byElement=function(){var e=createElement("a");return e.href="https://mailgo.js.org?ref=mailgo-modal",e.className="m-by",e.target="_blank",e.rel="noopener noreferrer",e.appendChild(createTextNode("mailgo.js.org")),e},createElement=function(e){var o=0<arguments.length&&void 0!==e?e:"div";return document.createElement(o)},createTextNode=function(e){return document.createTextNode(e)},mailToEncoded=function(e){return window.location.href=MAILTO+atob(e)},encodeEmail=function(e){return btoa(e)},getE=function(e){return document.getElementById(e)},getDisplay=function(e){return getE(e).style.display},setDisplay=function(e,o){return getE(e).style.display=o},composedPath=function(e){for(var o=[];e;){if(o.push(e),"HTML"===e.tagName)return o.push(document),o.push(window),o;e=e.parentElement}},validateEmail=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},validateEmails=function(e){return e.every(validateEmail)},copyToClipboard=function(e){var o=createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o);var t=0<document.getSelection().rangeCount&&document.getSelection().getRangeAt(0);o.select(),document.execCommand("copy"),document.body.removeChild(o),t&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(t))},defaultMailgo=function(){if(window&&"undefined"!=typeof window){var e=createElement("style");e.id="mailgo-style",e.type="text/css",e.appendChild(createTextNode('.m-modal{position:fixed;top:0;right:0;bottom:0;left:0;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;font-size:15px;z-index:10000}.m-modal a,.m-modal p,.m-modal span,.m-modal strong{margin:0;padding:0;font-size:100%;line-height:1;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-rendering:optimizeLegibility}.m-modal strong{font-weight:700}.m-modal .m-modal-back{position:absolute;z-index:10001;top:0;right:0;bottom:0;left:0;background-color:rgba(32,35,42,.75);opacity:.8}.m-modal .m-modal-content{position:relative;z-index:10002;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;text-align:center;min-width:200px;max-width:240px;background-color:#fff;opacity:.97;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 3px 20px rgba(32,35,42,.5);-moz-box-shadow:0 3px 20px rgba(32,35,42,.5);box-shadow:0 3px 20px rgba(32,35,42,.5);color:#4a4a4a;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:auto;padding:20px;-webkit-transition:.5s -webkit-box-shadow;transition:.5s -webkit-box-shadow;-o-transition:.5s box-shadow;-moz-transition:.5s box-shadow,.5s -moz-box-shadow;transition:.5s box-shadow;transition:.5s box-shadow,.5s -webkit-box-shadow,.5s -moz-box-shadow}.m-modal .m-modal-content:hover{opacity:1;-webkit-box-shadow:0 7px 20px rgba(32,35,42,.85);-moz-box-shadow:0 7px 20px rgba(32,35,42,.85);box-shadow:0 7px 20px rgba(32,35,42,.85)}.m-modal .m-modal-content .m-title{margin-bottom:8px;overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.m-modal .m-modal-content .m-details{margin-bottom:10px}.m-modal .m-modal-content .m-details p{font-size:12px;margin-top:3px;margin-bottom:3px}.m-modal .m-modal-content a{padding:10px;color:#4a4a4a;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-decoration:none}.m-modal .m-modal-content a.m-gmail{color:#d44638}.m-modal .m-modal-content a.m-gmail:hover{background-color:rgba(212,70,56,.08);color:#d44638}.m-modal .m-modal-content a.m-outlook{color:#0072c6}.m-modal .m-modal-content a.m-outlook:hover{background-color:rgba(0,114,198,.08);color:#0072c6}.m-modal .m-modal-content a.m-tg{color:#08c}.m-modal .m-modal-content a.m-tg:hover{background-color:rgba(0,114,198,.08);color:#08c}.m-modal .m-modal-content a.m-wa{color:#00bfa5}.m-modal .m-modal-content a.m-wa:hover{background-color:rgba(0,191,165,.08);color:#00bfa5}.m-modal .m-modal-content a.m-skype{color:#00aff0}.m-modal .m-modal-content a.m-skype:hover{background-color:rgba(0,175,240,.08);color:#00aff0}.m-modal .m-modal-content a.m-copy{padding:16px 10px;font-size:16px}.m-modal .m-modal-content a.m-copy:hover,.m-modal .m-modal-content a.m-default:hover{background-color:rgba(0,0,0,.08);color:#4a4a4a}.m-modal .m-modal-content a.m-by{font-size:8px;margin-top:.8rem;padding:5px;color:#4a4a4a;opacity:.5}.m-modal .m-modal-content a.m-by:hover{opacity:1}.m-modal .m-modal-content .w-500{font-weight:500}')),document.head.appendChild(e),document.addEventListener("DOMContentLoaded",mailgoInit),document.addEventListener("click",mailgoCheckRender)}};exports.defaultMailgo=defaultMailgo;var mailgo=function(){if(window&&"undefined"!=typeof window){var e=createElement("style");e.id="mailgo-style",e.type="text/css",e.appendChild(createTextNode('.m-modal{position:fixed;top:0;right:0;bottom:0;left:0;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:hidden;font-size:15px;z-index:10000}.m-modal a,.m-modal p,.m-modal span,.m-modal strong{margin:0;padding:0;font-size:100%;line-height:1;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";text-rendering:optimizeLegibility}.m-modal strong{font-weight:700}.m-modal .m-modal-back{position:absolute;z-index:10001;top:0;right:0;bottom:0;left:0;background-color:rgba(32,35,42,.75);opacity:.8}.m-modal .m-modal-content{position:relative;z-index:10002;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;text-align:center;min-width:200px;max-width:240px;background-color:#fff;opacity:.97;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;-webkit-box-shadow:0 3px 20px rgba(32,35,42,.5);-moz-box-shadow:0 3px 20px rgba(32,35,42,.5);box-shadow:0 3px 20px rgba(32,35,42,.5);color:#4a4a4a;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;overflow:auto;padding:20px;-webkit-transition:.5s -webkit-box-shadow;transition:.5s -webkit-box-shadow;-o-transition:.5s box-shadow;-moz-transition:.5s box-shadow,.5s -moz-box-shadow;transition:.5s box-shadow;transition:.5s box-shadow,.5s -webkit-box-shadow,.5s -moz-box-shadow}.m-modal .m-modal-content:hover{opacity:1;-webkit-box-shadow:0 7px 20px rgba(32,35,42,.85);-moz-box-shadow:0 7px 20px rgba(32,35,42,.85);box-shadow:0 7px 20px rgba(32,35,42,.85)}.m-modal .m-modal-content .m-title{margin-bottom:8px;overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis}.m-modal .m-modal-content .m-details{margin-bottom:10px}.m-modal .m-modal-content .m-details p{font-size:12px;margin-top:3px;margin-bottom:3px}.m-modal .m-modal-content a{padding:10px;color:#4a4a4a;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;text-decoration:none}.m-modal .m-modal-content a.m-gmail{color:#d44638}.m-modal .m-modal-content a.m-gmail:hover{background-color:rgba(212,70,56,.08);color:#d44638}.m-modal .m-modal-content a.m-outlook{color:#0072c6}.m-modal .m-modal-content a.m-outlook:hover{background-color:rgba(0,114,198,.08);color:#0072c6}.m-modal .m-modal-content a.m-tg{color:#08c}.m-modal .m-modal-content a.m-tg:hover{background-color:rgba(0,114,198,.08);color:#08c}.m-modal .m-modal-content a.m-wa{color:#00bfa5}.m-modal .m-modal-content a.m-wa:hover{background-color:rgba(0,191,165,.08);color:#00bfa5}.m-modal .m-modal-content a.m-skype{color:#00aff0}.m-modal .m-modal-content a.m-skype:hover{background-color:rgba(0,175,240,.08);color:#00aff0}.m-modal .m-modal-content a.m-copy{padding:16px 10px;font-size:16px}.m-modal .m-modal-content a.m-copy:hover,.m-modal .m-modal-content a.m-default:hover{background-color:rgba(0,0,0,.08);color:#4a4a4a}.m-modal .m-modal-content a.m-by{font-size:8px;margin-top:.8rem;padding:5px;color:#4a4a4a;opacity:.5}.m-modal .m-modal-content a.m-by:hover{opacity:1}.m-modal .m-modal-content .w-500{font-weight:500}')),document.head.appendChild(e),mailgoInit(),document.addEventListener("click",mailgoCheckRender)}};exports.mailgo=mailgo;